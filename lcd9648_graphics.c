
#include "lcd9648_graphics.h"
#include "lcd9648_screen.h"

//12*12 ASCII×Ö·û¼¯µãÕó
static const uint8 code _ASCIIFont1206[16][12] = {		
{0x1F,0x80,0x20,0x40,0x20,0x40,0x20,0x40,0x1F,0x80,0x00,0x00},/*"0",16*/
{0x00,0x00,0x10,0x40,0x3F,0xC0,0x00,0x40,0x00,0x00,0x00,0x00},/*"1",17*/
{0x18,0xC0,0x21,0x40,0x22,0x40,0x24,0x40,0x18,0x40,0x00,0x00},/*"2",18*/
{0x10,0x80,0x20,0x40,0x24,0x40,0x24,0x40,0x1B,0x80,0x00,0x00},/*"3",19*/
{0x02,0x00,0x0D,0x00,0x11,0x00,0x3F,0xC0,0x01,0x40,0x00,0x00},/*"4",20*/
{0x3C,0x80,0x24,0x40,0x24,0x40,0x24,0x40,0x23,0x80,0x00,0x00},/*"5",21*/
{0x1F,0x80,0x24,0x40,0x24,0x40,0x34,0x40,0x03,0x80,0x00,0x00},/*"6",22*/
{0x30,0x00,0x20,0x00,0x27,0xC0,0x38,0x00,0x20,0x00,0x00,0x00},/*"7",23*/
{0x1B,0x80,0x24,0x40,0x24,0x40,0x24,0x40,0x1B,0x80,0x00,0x00},/*"8",24*/
{0x1C,0x00,0x22,0xC0,0x22,0x40,0x22,0x40,0x1F,0x80,0x00,0x00},/*"9",25*/
{0x00,0x40,0x07,0xC0,0x39,0x00,0x0F,0x00,0x01,0xC0,0x00,0x40},/*"A",33*/
{0x20,0x40,0x3F,0xC0,0x24,0x40,0x24,0x40,0x1B,0x80,0x00,0x00},/*"B",34*/
{0x1F,0x80,0x20,0x40,0x20,0x40,0x20,0x40,0x30,0x80,0x00,0x00},/*"C",35*/
{0x20,0x40,0x3F,0xC0,0x20,0x40,0x20,0x40,0x1F,0x80,0x00,0x00},/*"D",36*/
{0x20,0x40,0x3F,0xC0,0x24,0x40,0x2E,0x40,0x30,0xC0,0x00,0x00},/*"E",37*/
{0x20,0x40,0x3F,0xC0,0x24,0x40,0x2E,0x00,0x30,0x00,0x00,0x00} /*"F",38*/
};

static void _DrawDots1206(int8 x, int8 y, int8 dotsIndex)
{
	int8 i, j, ty, pos = 0, s;
	uint8 tmp;

	for (i = 0; i < 6; i++)
	{	
		s = 8;
		Loop:			
		tmp = _ASCIIFont1206[dotsIndex][pos++];
		for (j = 0; j < s; j++)
		{
			ty = y + j;
			if (s == 4) ty += 8;
			if ((tmp & 0x80) != 0 &&
				0 <= x && x < LCD9648_SCREEN_WIDTH && 
				0 <= ty && ty < LCD9648_SCREEN_HEIGHT)
			{ 
				LCD9648_SetPixel(x, ty, 1);
			}
			tmp <<= 1;
		}
		
		if (s == 8) 
		{
			s = 4;
			goto Loop;
		}

		x++;
	}
}

void LCD9648_PrintMemory(int8 x, int8 y, uint8 *mem, int8 len)
{
	uint8 n;
	while (len)
	{
		n = *mem;
		_DrawDots1206(x, y, (n >> 4) & 0x0F);
		x += 6;
		_DrawDots1206(x, y, n & 0x0F);	
		x += 6;
		mem++;
		len--;
	}		
}

/*
static int8 _GetCharIndex1206(char c)
{											  
	if ('0' <= c && c <= '9') return c - '0';
	if ('a' <= c && c <= 'f') return c - 'a' + 10;
	if ('A' <= c && c <= 'F') return c - 'A' + 10;
    if (c == ' ') 			  return 16;
							  return 17;
}

void LCD9648_DrawString(int8 x, int8 y, char *str)
{	
	while (*str != '\0')
	{
		_DrawDots1206(x, y, _GetCharIndex1206(*str));
		str++;
		x += 6;
	}	
}
*/
